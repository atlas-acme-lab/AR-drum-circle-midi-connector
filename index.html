<html>
  <head>
    <meta name="description" content="">
    <meta name="author" content="Peter Gyory">
    <meta name="theme-color" content="#B12A34">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:image" content="./icons/mm-icon-512.png">
    <!-- <link rel="stylesheet" href="style.css"> -->
    <!-- <link rel="manifest" href="js13kpwa.webmanifest"> -->
  </head>

  <body>

    <script>
      function onButtonClick() {
        let filters = [];

        // let filterService = document.querySelector('#service').value;
        // if (filterService.startsWith('0x')) {
        //   filterService = parseInt(filterService);
        // }
        // if (filterService) {
        //   filters.push({services: [filterService]});
        // }

        // let filterName = document.querySelector('#name').value;
        // if (filterName) {
        //   filters.push({name: filterName});
        // }

        // let filterNamePrefix = document.querySelector('#namePrefix').value;
        // if (filterNamePrefix) {
        //   filters.push({namePrefix: filterNamePrefix});
        // }

        // let options = {};
        // if (document.querySelector('#allDevices').checked) {
        //   options.acceptAllDevices = true;
        // } else {
        //   options.filters = filters;
        // }
        let options = {};
        options.acceptAllDevices = true;

        console.log('Requesting Bluetooth Device...');
        console.log('with ' + JSON.stringify(options));
        console.log(navigator);
        navigator.bluetooth.requestDevice(options)
        .then(device => {
          console.log('> Name:             ' + device.name);
          console.log('> Id:               ' + device.id);
          console.log('> Connected:        ' + device.gatt.connected);
        })
        .catch(error => {
          console.log('Argh! ' + error);
        });
      }

      document.onclick = onButtonClick;
    </script>
  </body>
</html>